{% extends "base.html" %}
{% block title %}My Attendance - AI Attendance System{% endblock %}
{% block content %}
<div class="row mb-4">
  <div class="col-12">
    <h2 class="text-primary"><i class="fas fa-user-graduate me-2"></i>Welcome, {{ student.name }}</h2>
    <p class="text-muted">Roll: {{ student.roll_number }} â€¢ Class: {{ student.class_name }}</p>
  </div>
</div>

<div class="row mb-4">
  <div class="col-md-4 mb-3">
    <div class="card bg-success text-white"><div class="card-body"><h4 class="card-title">{{ present_days_total }}</h4><p class="card-text">Total Present Days</p></div></div>
  </div>
  <div class="col-md-4 mb-3">
    <div class="card bg-info text-white"><div class="card-body"><h4 class="card-title">{{ present_days_last30 }}/{{ class_days_last30 }}</h4><p class="card-text">Last 30 Days (Present/Class Days)</p></div></div>
  </div>
  <div class="col-md-4 mb-3">
    <div class="card bg-primary text-white"><div class="card-body"><h4 class="card-title">{{ '%.1f'|format(percentage_last30) }}%</h4><p class="card-text">Attendance % (Last 30)</p></div></div>
  </div>
</div>

<div class="card">
  <div class="card-header"><h5 class="mb-0"><i class="fas fa-list me-2"></i>Recent Attendance</h5></div>
  <div class="card-body">
    {% if all_records %}
    <div class="table-responsive">
      <table class="table table-hover">
        <thead><tr><th>Date</th><th>Time</th><th>Status</th></tr></thead>
        <tbody>
          {% for att in all_records %}
          <tr>
            <td>{{ att.date.strftime('%Y-%m-%d') }}</td>
            <td>{{ att.time.strftime('%H:%M:%S') }}</td>
            <td><span class="badge bg-success">Present</span></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <p class="text-muted mb-0">No attendance records yet.</p>
    {% endif %}
  </div>
</div>
{% endblock %}


